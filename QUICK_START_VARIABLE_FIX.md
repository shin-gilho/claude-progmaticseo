# 🚀 빠른 시작: 템플릿 변수 치환 문제 해결

## ⚡ 5분 안에 해결하기

---

## 1️⃣ 문제 확인

다음과 같은 증상이 나타나나요?

- ❌ Title: "R1049 - 상세 정보" (폴백 값)
- ❌ Content: "질병코드 " (빈 값)
- ❌ 템플릿 변수가 치환되지 않음

→ **이 가이드를 따르세요!**

---

## 2️⃣ 즉시 해결 (프롬프트만 수정)

### A. 프롬프트에서 변수명 확인

**❌ 이렇게 되어있나요?**
```
질병코드: {{키워드}}
제목: 질병코드 {{키워드}} 실비 보험금 청구
```

**✅ 이렇게 변경하세요:**
```
질병코드: {{keyword}}
제목: 질병코드 {{keyword}} 실손24 보험금 청구
```

💡 **참고:** `{{키워드}}`도 이제 지원되지만 `{{keyword}}` 권장

---

### B. AI에게 명확한 지시 추가

**프롬프트 상단에 이 내용 추가:**

```
당신은 질병코드와 실손보험 전문가입니다.
다음 정보를 순수 JSON 형식으로 생성해주세요.

**중요 규칙:**
1. 추가 설명이나 주석 없이 JSON만 반환하세요
2. {{...}} 형식은 사용하지 말고, 실제 값으로 채워주세요
3. 모든 필드는 필수입니다
4. {{keyword}} 부분은 그대로 두세요 (시스템이 자동 치환)
```

---

### C. JSON 예시 제공

**프롬프트에 이 JSON 스키마 추가:**

```json
{
  "title": "질병코드 {{keyword}} 실손24 보험금 청구",
  "symptom_question": "배가 아파서",
  "disease_name_kr": "급성 복통",
  "disease_name_en": "Acute Abdominal Pain",
  "disease_overview": "급성 복통은 갑자기 발생하는 심한 복부 통증을 의미합니다.",
  "insurance_possible": "가능",
  ...
}
```

📄 **전체 예시:** [example-prompt-fixed.md](./example-prompt-fixed.md) 참고

---

## 3️⃣ 템플릿 수정 (선택, 권장)

### 변수명 통일

**❌ 수정 전:**
```html
<p>질병코드 {{disease_code}}</p>
<h2>{{키워드}} 정보</h2>
```

**✅ 수정 후:**
```html
<p>질병코드 {{keyword}}</p>
<h2>{{keyword}} 정보</h2>
```

💡 **참고:** 코드가 `{{disease_code}}`, `{{키워드}}` 모두 지원하므로 수정 안 해도 작동함

---

## 4️⃣ 테스트

1. **Generate 페이지 이동**
2. **키워드 입력:** `R1049`
3. **수정한 프롬프트 선택**
4. **생성 실행**
5. **History에서 확인:**
   - ✅ Title: "질병코드 R1049 실손24 보험금 청구"
   - ✅ Content: 모든 변수 치환됨

---

## 🎯 핵심 요약

| 항목 | 변경 전 | 변경 후 |
|------|---------|---------|
| **프롬프트 변수** | `{{키워드}}` | `{{keyword}}` (권장) |
| **AI 지시** | 없음 | "순수 JSON만 반환, {{...}} 사용 금지" |
| **title 필드** | 없음 | `"title": "질병코드 {{keyword}} 실손24 보험금 청구"` |
| **JSON 예시** | `{{...}}` 형식 사용 | 실제 값 사용 |

---

## 📚 더 자세히 알아보기

| 문서 | 언제 읽을까? |
|------|--------------|
| [VARIABLE_FIX_GUIDE.md](./VARIABLE_FIX_GUIDE.md) | 문제를 깊이 이해하고 싶을 때 |
| [example-prompt-fixed.md](./example-prompt-fixed.md) | 완전한 프롬프트 예시가 필요할 때 |
| [IMPLEMENTATION_SUMMARY.md](./IMPLEMENTATION_SUMMARY.md) | 구현 세부사항을 알고 싶을 때 |

---

## 💡 지원되는 변수명

프롬프트와 템플릿에서 다음 변수명을 **모두** 사용할 수 있습니다:

- ✅ `{{keyword}}` (영문, 권장)
- ✅ `{{키워드}}` (한글)
- ✅ `{{disease_code}}` (별칭)

**예시:**
```
프롬프트: 질병코드 {{keyword}}
템플릿: <h2>{{keyword}} 정보</h2>
```

---

## ❓ 여전히 안 되나요?

### 체크리스트:

- [ ] 프롬프트에서 `{{keyword}}` 사용 (또는 `{{키워드}}`, `{{disease_code}}`)
- [ ] AI에게 "순수 JSON만 반환" 지시
- [ ] AI에게 "{{...}} 형식 사용 금지" 지시
- [ ] JSON 예시에 `title` 필드 포함
- [ ] JSON 예시에 모든 필수 필드 포함

### 추가 도움:

1. **AI 응답 확인:** 생성된 포스트의 AI 응답이 올바른 JSON인지 확인
2. **콘솔 로그 확인:** 브라우저 개발자 도구에서 에러 메시지 확인
3. **상세 가이드 읽기:** [VARIABLE_FIX_GUIDE.md](./VARIABLE_FIX_GUIDE.md)

---

## ✅ 완료!

이제 정상적으로 콘텐츠가 생성됩니다! 🎉

**예상 결과:**
- Title: "질병코드 R1049 실손24 보험금 청구" ✅
- Content: 모든 변수가 정확히 치환됨 ✅
- 빈 값 없음 ✅
